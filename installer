#!/usr/bin/env bash

set -euo pipefail

##? Setups the environment
#?? 1.0.0
##?
##? Usage:
##?    install

echo "ðŸš€ Welcome to the jvegaf/dotfiles installer!"
echo "-------------------------------------------------"
echo

echo "Installing previuos dependencies"
sudo pacman -S --noconfirm rust fzf
cargo install exa docpars
export PATH="$HOME/.cargo/bin:$PATH"

read -rp "ðŸ¤”  Where do you want to clone the dotfiles? (default ~/.dotfiles): " DOTFILES_PATH
echo
#DOTFILES_PATH="${DOTFILES_PATH:-~/.dotfiles}"
export DOTFILES_PATH="$HOME/.dotfiles"
echo "ðŸ‘‰  Cloning into: '$DOTFILES_PATH'"

git clone --branch arch --single-branch --recurse-submodules -j8 --depth 1 git@github.com:jvegaf/dotfiles.git "$DOTFILES_PATH"

"$DOTFILES_PATH/bin/dot" self install
